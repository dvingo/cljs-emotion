{"version":3,"sources":["nubank/workspaces/ui/modal.cljs"],"mappings":";;;;AAQA,2DAAA,3DAAMA,8HAA+BC,OAAOC,EAAEC;AAA9C,AACE,OAACC,6CAAgDH,OAAOC,EAAEC;;AAE5D,+BAAA,/BAAME,sEAAGC;AAAT,AAAY,OAAgBC,uBAAYD;;AAExC,gDAAA,hDAAME,wGAAoBC;AAA1B,AACE,IAAMN,OAAK,iBAAAO,WAAM,uBAAA,vBAACC;AAAP,AAAA,oBAAAD,pBACGE,6BAAe,AAACC,qBAAQ,AAAA,qFAAQJ;;AADnCC;;AAAX,AAEE,oBACE,AAAA,6FAAYD;AAAO,AAACK,gBAAY,AAACT,6BAAE,AAAA,6FAAYI,QAAQN;;AADzD,oBAEE,AAAA,mGAAeM;AAAO,AAACM,4BAAwBZ,KAAK,AAACE,6BAAE,AAAA,mGAAeI;;AAFxE;;;AAGAN;;AAEJ,oDAAA,pDAAMa,gHAAwBC;AAA9B,AACE,kGAAA,3FAACC,8CAAMC,kDAAYF;;AAErB,AAAA,AAAA;AAAA,IAAAG,+BAAA,2CAAA,8EAEG,WAAKoB;AAAL,AACE,IAAM/B,QAAM,CAACa,wEAAAA,+EAAAA,TAASkB,2DAAAA;IAChBrC,OAAM,AAACK,8CAAmBC;AADhC,AAEE,6DAAA,7DAACiC,uDAASF,aAAYrC;;AACtB,OAACH,yDAA8BwC,MAAK,AAACxB,kDAAuB,AAAC2B,2CAAYH,QAAOrC;GANvF,qFASG,WAAKqC;AAAL,AACE,IAAAI,qBAAgB,6DAAA,7DAACC,uDAASL;AAA1B,AAAA,oBAAAI;AAAA,AAAA,WAAAA,PAAWzC;AAAX,AACE,AAAC2C,gCAAmC3C;;AACpC,OAAC4C,oBAAgB5C;;AAFnB;;GAVL,8FAeG,WAAKqC,MAAKC;AAAV,AACE,IAAMtC,OAAK,6DAAA,7DAAC0C,uDAASL;AAArB,AACE,OAACxC,yDAA8BwC,MAAK,AAACxB,kDAAuB,AAAC2B,2CAAYH,QAAOrC;GAjBvF,kFAoBG,WAAKqC,MAAKC,EAAEA;AAAZ,AACE,IAAMtC,OAAK,6DAAA,7DAAC0C,uDAASL;AAArB,AACE,OAACxC,yDAA8BwC,MAAK,AAACxB,kDAAuB,AAAC2B,2CAAYH,QAAOrC;GAtBvF,0DAAA,mDAAkBqC;AAAlB,AAAA,OAAAnB,uDAAA,NAAkBmB;AAAlB,AAAA,QAAA,CAAAlB,wEAAAA,+EAAAA,TAAkBkB,2DAAAA,9MAAKC;AAAvB,AAwBE,OAACO;;;AAxBH,AAAA,GAAA,QAAAzB,mCAAAC,8CAAAC,iDAAAC,uDAAAC;AAAA;AAAA,AAAA;;;oCAAA,4CAAAC,hFAAUW;AAAV,AAAA,IAAAV,sBAAA;AAAA,AAAA,IAAAC,2BAAA,AAAAC,4CAAAX,6BAAA;AAAA,AAAA,oBAAAU;AAAA,IAAAE,kCAAAF;AAAA,AAAA,CAAA,AAAAD,4BAAA,iBAAAI,WAAA,EAAA,eAAA,iBAAAC,WAAAL;IAAAM,WAAA,CAAAC,yEAAAA,uEAAAR,qBAAA,kBAAAQ,mDAAAR,qBAAA;AAAA,AAAA,QAAAI,gEAAAA,8DAAAE,SAAAC,YAAAH,0CAAAE,SAAAC;;AAAA,AAAAF;;;AAAA,CAAA,AAAAJ,4BAAA,iBAAAQ,WAAA,EAAA,eAAA;AAAA,AAAAA;;;;AAAA;;;;AAAA,AAAAC,8FAAA,6GAAAlB,/IAAUmB;AA0BV,AAAKU,oCAAO,AAACC,wEAAWX;AAExB,AAAA,AAAA;AAAA,IAAAnB,+BAAA,2CAAA,mDAAA,mFAAA,mFAAA,kEAAA,2CAAA,iEAAA,OAAA,6DAAA,+BAAA,0DAAA,0DAAyBoB;AAAzB,AAAA,OAAAnB,uDAAA,NAAyBmB;AAAzB,AAAA,YAAA,CAAAlB,wEAAAA,+EAAAA,TAAyBkB,2DAAAA,lNAAK/B;AAA9B,AAGE,2IAAA,pIAACgD,sMAAoBhD,MACnB,AAACkC,2CAAYH;;;AAJjB,AAAA,GAAA,QAAAjB,mCAAAC,8CAAAC,iDAAAC,uDAAAyB;AAAA;AAAA,AAAA;;;2CAAA,mDAAAvB,9FAAU4B;AAAV,AAAA,IAAA3B,sBAAA;AAAA,AAAA,IAAAC,2BAAA,AAAAC,4CAAAX,6BAAA;AAAA,AAAA,oBAAAU;AAAA,IAAAE,kCAAAF;AAAA,AAAA,CAAA,AAAAD,4BAAA,iBAAAuB,WAAA,EAAA,eAAA,iBAAAC,WAAAxB;IAAAyB,WAAA,CAAAlB,yEAAAA,uEAAAR,qBAAA,kBAAAQ,mDAAAR,qBAAA;AAAA,AAAA,QAAAI,gEAAAA,8DAAAqB,SAAAC,YAAAtB,0CAAAqB,SAAAC;;AAAA,AAAAF;;;AAAA,CAAA,AAAAvB,4BAAA,iBAAA0B,WAAA,EAAA,eAAA;AAAA,AAAAA;;;;AAAA;;;;AAAA,AAAAjB,qGAAA,yHAAAlB,lKAAUoC;AAMV,AAAKE,4CAAe,AAACR,wEAAWM;AAEhC,AAAA,AAAA;AAAA,IAAApC,+BAAA,2CAAA,mDAAA,mFAAA,mFAAA,mEAAA,wCAAA,mEAAA,oDAAA,uDAAA,iEAAA,2DAAA,4EAAA,0DAAA,8DAAA,kEAAA,yDAAA,uDAAA,SAAA,IAAA,QAAA,qBAAA,MAAA,SAAA,OAAA,QAAA,SAAA,QAAA,cAAA,mFAAA,kEAAA,2CAAA,0DAAA,OAAA,wEAAA,SAAA,gEAAA,OAAA,iEAAA,uBAAA,mFAAA,yDAAA,2CAAA,iEAAA,WAAA,uDAAA,QAAA,yDAAA,UAAA,gEAAA,OAAA,yEAAA,oCAAA,kEAAA,oIAAA,0DAAA,kDAAiBoB,7JAsBAgB;AAtBjB,AAAA,OAAAnC,uDAAA,NAAiBmB;AAAjB,AAAA,IAAAmB,aAAA,CAAArC,wEAAAA,+EAAAA,TAAiBkB,2DAAAA;IAAjBmB,iBAAA,AAAAC,4BAAAD;eAAA,AAAA5B,4CAAA4B,eAAA,tEAA+BQ,sLACSC;AADxC,AAuBE,IAAAC,WAAA,2CAAA,+DAAA;IAAAC,WACE,yCAAA,2CAAA,oHAAA,SAAA,jNAACE,+TACwCL;IAF3CI,WAGE,oIAAA,mEAAA,2CAAA,lPAACd,8SAA+B,WAAKgB;AAAL,AACE,GAAI,AAACC,6CAAE,AAAiBD,gBAAG,AAAUA;AACnC,QAACN,yCAAAA,4CAAAA,LAASM,wBAAAA;;AADZ;;WAEhC,oIAAA,pIAAChB,sMACC,AAACA,oIACC,AAACd,2CAAYH;AARrB,AAAA,0IAAA6B,SAAAC,SAAAC,wDAAAF,SAAAC,SAAAC,9NAACtB,kEAAAA,8FAAAA;;;AAvBH,AAAA,GAAA,QAAA1B,mCAAAC,8CAAAC,iDAAAC,uDAAAmC;AAAA;AAAA,AAAA;;;mCAAA,2CAAAjC,9EAAUsC;AAAV,AAAA,IAAArC,sBAAA;AAAA,AAAA,IAAAC,2BAAA,AAAAC,4CAAAX,6BAAA;AAAA,AAAA,oBAAAU;AAAA,IAAAE,kCAAAF;AAAA,AAAA,CAAA,AAAAD,4BAAA,iBAAAiC,WAAA,EAAA,eAAA,iBAAAC,WAAAlC;IAAAmC,WAAA,CAAA5B,yEAAAA,uEAAAR,qBAAA,kBAAAQ,mDAAAR,qBAAA;AAAA,AAAA,QAAAI,gEAAAA,8DAAA+B,SAAAC,YAAAhC,0CAAA+B,SAAAC;;AAAA,AAAAF;;;AAAA,CAAA,AAAAjC,4BAAA,iBAAAoC,WAAA,EAAA,eAAA;AAAA,AAAAA;;;;AAAA;;;;AAAA,AAAA3B,6FAAA,0GAAAlB,3IAAU8C;AAiCV,AAAKS,mCAAM,AAACzB,wEAAWgB","names":["nubank.workspaces.ui.modal/render-subtree-into-container","parent","c","node","js/ReactDOM.unstable_renderSubtreeIntoContainer","nubank.workspaces.ui.modal/$","s","js/document","nubank.workspaces.ui.modal/create-portal-node","props","G__58961","goog.dom/createElement","goog.style/setStyle","cljs.core/clj->js","goog.dom/append","goog.dom/insertSiblingAfter","nubank.workspaces.ui.modal/portal-render-children","children","cljs.core.apply","com.fulcrologic.fulcro-css.localized-dom/div","options__48885__auto__","com.fulcrologic.fulcro.components/wrapped-render","com.fulcrologic.fulcro.components/props","js/nubank","js/nubank.workspaces","js/nubank.workspaces.ui","js/nubank.workspaces.ui.modal","js/nubank.workspaces.ui.modal.Portal","props__48886__auto__","this__48887__auto__","temp__5751__auto__","cljs.core.get","init-state__48888__auto__","obj58980","G__58981","G__58982","com.fulcrologic.fulcro.components/isoget","obj58984","com.fulcrologic.fulcro.components/configure-component!","nubank.workspaces.ui.modal/Portal","this","_","nubank.workspaces.ui.modal.goog$module$goog$object.set","com.fulcrologic.fulcro.components/children","temp__5753__auto__","nubank.workspaces.ui.modal.goog$module$goog$object.get","js/ReactDOM.unmountComponentAtNode","goog.dom/removeNode","com.fulcrologic.fulcro-css.localized-dom/noscript","nubank.workspaces.ui.modal/portal","com.fulcrologic.fulcro.components.factory","js/nubank.workspaces.ui.modal.WidgetContent","obj58997","G__59000","G__59001","obj59003","nubank.workspaces.ui.modal/WidgetContent","com.fulcrologic.fulcro_css.localized_dom.div","nubank.workspaces.ui.modal/widget-content","map__59012","cljs.core/--destructure-map","js/nubank.workspaces.ui.modal.Modal","obj59031","G__59032","G__59033","obj59037","nubank.workspaces.ui.modal/Modal","on-close","cljs.core/identity","G__59017","G__59018","G__59019","nubank.workspaces.ui.events/dom-listener","e","cljs.core._EQ_","nubank.workspaces.ui.modal/modal"],"sourcesContent":["(ns nubank.workspaces.ui.modal\n  (:require [goog.dom :as gdom]\n            [goog.object :as gobj]\n            [goog.style :as style]\n            [com.fulcrologic.fulcro-css.localized-dom :as dom]\n            [com.fulcrologic.fulcro.components :as fp]\n            [nubank.workspaces.ui.events :as events]))\n\n(defn render-subtree-into-container [parent c node]\n  (js/ReactDOM.unstable_renderSubtreeIntoContainer parent c node))\n\n(defn $ [s] (.querySelector js/document s))\n\n(defn create-portal-node [props]\n  (let [node (doto (gdom/createElement \"div\")\n               (style/setStyle (clj->js (:style props))))]\n    (cond\n      (:append-to props) (gdom/append ($ (:append-to props)) node)\n      (:insert-after props) (gdom/insertSiblingAfter node ($ (:insert-after props))))\n    node))\n\n(defn portal-render-children [children]\n  (apply dom/div nil children))\n\n(fp/defsc Portal [this _]\n  {:componentDidMount\n   (fn [this]\n     (let [props (fp/props this)\n           node  (create-portal-node props)]\n       (gobj/set this \"node\" node)\n       (render-subtree-into-container this (portal-render-children (fp/children this)) node)))\n\n   :componentWillUnmount\n   (fn [this]\n     (when-let [node (gobj/get this \"node\")]\n       (js/ReactDOM.unmountComponentAtNode node)\n       (gdom/removeNode node)))\n\n   :componentWillReceiveProps\n   (fn [this _]\n     (let [node (gobj/get this \"node\")]\n       (render-subtree-into-container this (portal-render-children (fp/children this)) node)))\n\n   :componentDidUpdate\n   (fn [this _ _]\n     (let [node (gobj/get this \"node\")]\n       (render-subtree-into-container this (portal-render-children (fp/children this)) node)))}\n\n  (dom/noscript))\n\n(def portal (fp/factory Portal))\n\n(fp/defsc WidgetContent [this props]\n  {:css [[:.container {:max-height \"70vh\"\n                       :overflow   \"auto\"}]]}\n  (dom/div :.container props\n    (fp/children this)))\n\n(def widget-content (fp/factory WidgetContent))\n\n(fp/defsc Modal [this {::keys [on-close]\n                       :or    {on-close identity}}]\n  {:css         [[:.background {:position        \"fixed\"\n                                :left            0\n                                :top             0\n                                :background      \"rgba(0, 0, 0, 0.5)\"\n                                :width           \"100vw\"\n                                :height          \"100vh\"\n                                :display         \"flex\"\n                                :align-items     \"center\"\n                                :justify-content \"center\"\n                                :z-index         \"100\"\n                                :overflow-y      \"scroll\"}]\n                 [:.container {:display        \"flex\"\n                               :flex-direction \"column\"\n                               :max-width      \"90vw\"\n                               :max-height     \"80vh\"}]\n                 [:.close {:align-self     \"flex-end\"\n                           :color          \"white\"\n                           :cursor         \"pointer\"\n                           :font-size      \"10px\"\n                           :text-transform \"uppercase\"}]]\n   :css-include [WidgetContent]}\n  (portal {:append-to \"body\"}\n    (events/dom-listener {::events/keystroke \"escape\"\n                          ::events/action    on-close})\n    (dom/div :.background {:onClick (fn [e]\n                                      (if (= (.-currentTarget e) (.-target e))\n                                        (on-close e)))}\n      (dom/div :.container\n        (dom/div\n          (fp/children this))))))\n\n(def modal (fp/factory Modal))\n"]}